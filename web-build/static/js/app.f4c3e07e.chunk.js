(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{192:function(e,t,n){"use strict";n.d(t,"a",(function(){return j})),n.d(t,"b",(function(){return D}));var a=n(9),r=n.n(a),o=n(0),l=n.n(o),i=n(6),s=n(35),c=n(5),u=n(68),m=n(14),d=n(40),f=n(41),b=n(3),p=n(34),g=n(43),C=n(67);function y(e){var t=e.navigation,n=Object(o.useState)(""),a=r()(n,2),i=a[0],s=a[1],c=Object(o.useContext)(j);return l.a.createElement(b.a,{style:w.appContainer},l.a.createElement(f.a,null),l.a.createElement(d.a,{style:w.usersContainer,keyboardShouldPersistTaps:"handled"},Object.keys(c).map((function(e,n){var a=Object(o.useState)(!1),u=r()(a,2),d=u[0],f=u[1],y=Object(o.useState)(!1),E=r()(y,2),x=E[0],h=E[1];Object(o.useEffect)((function(){c[e].logs&&("Entrou"==c[e].logs[Object.keys(c[e].logs)[Object.keys(c[e].logs).length-1]]?h(!0):h(!1))}),[c]);var T=function(){f(!1)},k=function(e){h(!0),g.a.database().ref("users/"+e+"/logs/"+Date.now()).set("Entrou")};return l.a.createElement(b.a,{style:w.userView,key:n},l.a.createElement(p.a,{style:[w.buttonContainer,{backgroundColor:c[e].admin?"#7E7E7E":x?"#14CE95":"#EB5C52"}],onPress:function(){f(!0)}},l.a.createElement(b.a,null,l.a.createElement(m.a,{style:w.web_usernameText},e),l.a.createElement(C.a.Container,{visible:d},l.a.createElement(C.a.Title,null,"Inserir password"),l.a.createElement(C.a.Description,null,"Insira a sua password para come\xe7ar!"),l.a.createElement(C.a.Input,{autoFocus:!0,secureTextEntry:!0,onChangeText:function(n){s(n),n.length>3&&g.a.auth().signInWithEmailAndPassword(e.toLowerCase()+"@log-my-work.pt",n+"99").then((function(){x?(h(!1),g.a.database().ref("users/"+e+"/logs/"+Date.now()).set("Saiu")):c[e].admin?t.push("Admin"):k(e),s(""),T()})).catch((function(e){console.log(e)}))},keyboardType:"number-pad"}),l.a.createElement(C.a.Button,{label:"OK",onPress:function(){g.a.auth().signInWithEmailAndPassword(e.toLowerCase()+"@log-my-work.pt",i+"99").then((function(){x?(h(!1),g.a.database().ref("users/"+e+"/logs/"+Date.now()).set("Saiu")):c[e].admin?t.push("Admin"):k(e),s(""),T()})).catch((function(e){console.log(e)}))}}),l.a.createElement(C.a.Button,{label:"Cancel",onPress:T})))))}))))}var w=c.a.create({appContainer:{display:"flex",flexGrow:1,backgroundColor:"#000"},usersContainer:{display:"flex",flexGrow:1,backgroundColor:"#313131"},userView:{padding:10},usernameText:{color:"#fff",textAlign:"center"},web_usernameText:{color:"#fff",textAlign:"center",fontSize:30},buttonContainer:{padding:20,borderRadius:10,justifyContent:"center",alignContent:"center"},timestampView:{padding:10,flex:1,flexDirection:"row",justifyContent:"space-between"},timestampContainer:{},logStateContainer:{}});function E(e){var t=e.navigation,n=(e.route,Object(o.useContext)(j));return l.a.createElement(b.a,{style:x.web_appContainer},l.a.createElement(f.a,null),l.a.createElement(d.a,{style:x.web_usersContainer},Object.keys(n).map((function(e,a){var i=Object(o.useState)(""),c=r()(i,2),u=c[0],d=c[1],f=Object(o.useState)(!1),C=r()(f,2),y=C[0],w=C[1],E=Object(o.useState)(!1),h=r()(E,2),T=h[0],k=h[1];return Object(o.useEffect)((function(){n[e].logs&&("Entrou"==n[e].logs[Object.keys(n[e].logs)[Object.keys(n[e].logs).length-1]]?k(!0):k(!1))}),[n]),l.a.createElement(b.a,{style:x.web_userView,key:a},y&&l.a.createElement(b.a,{style:x.web_buttonContainerAndInput},l.a.createElement(b.a,{style:x.web_passwdInputContainer},l.a.createElement(s.a,{style:x.web_passwdInput,secureTextEntry:!0,onChangeText:function(e){return d(e)}})),l.a.createElement(b.a,{style:{display:"flex",flex:1}},l.a.createElement(p.a,{style:x.web_confirmInputContainer,onPress:function(){g.a.auth().signInWithEmailAndPassword(e.toLowerCase()+"@log-my-work.pt",u+"99").then((function(){n[e].admin&&t.push("Admin"),w(!1),d("")})).catch((function(e){console.log(e)}))}},l.a.createElement(b.a,{style:x.web_confirmInput},l.a.createElement(m.a,{style:x.web_buttonText,numberOfLines:1},"Confirmar"))),l.a.createElement(p.a,{style:x.web_cancelInputContainer,onPress:function(){return w(!1)}},l.a.createElement(b.a,{style:x.web_cancelInput},l.a.createElement(m.a,{style:x.web_buttonText,numberOfLines:1},"Cancelar"))))),!y&&l.a.createElement(b.a,{style:x.web_buttonContainerContainer},l.a.createElement(p.a,{style:[x.web_buttonContainer,{backgroundColor:n[e].admin?"#7E7E7E":T?"#14CE95":"#EB5C52"}],onPress:function(){w(!y)}},l.a.createElement(b.a,null,l.a.createElement(m.a,{style:x.web_usernameText},e)))))}))))}var x=c.a.create({web_appContainer:{backgroundColor:"#000",flexGrow:1,justifyContent:"center",alignContent:"center"},web_usersContainer:{backgroundColor:"#313131",padding:10},web_userView:{display:"flex",flex:1,justifyContent:"space-between",alignContent:"space-between"},web_usernameText:{color:"#fff",textAlign:"center",fontSize:30},web_buttonContainer:{flex:1,padding:20,borderRadius:10,justifyContent:"center",alignContent:"center"},web_buttonContainerContainer:{display:"flex",flexDirection:"row",padding:11.5},web_buttonContainerAndInput:{display:"flex",flexDirection:"row",padding:20,justifyContent:"center",alignContent:"center"},web_timestampView:{padding:10,flex:1,flexDirection:"row",justifyContent:"space-between"},web_timestampContainer:{},web_logStateContainer:{},web_passwdInput:{flex:1,borderColor:"white",overflow:"hidden",borderRadius:10,borderWidth:1,backgroundColor:"#252525",color:"#FFF",fontSize:20},web_passwdInputContainer:{justifyContent:"space-between",alignContent:"space-between",flexDirection:"row",flex:1},web_cancelInputContainer:{flex:1,paddingHorizontal:20,paddingVertical:2},web_cancelInput:{flex:1,backgroundColor:"#EB5C52",alignContent:"center",justifyContent:"center",borderRadius:15},web_confirmInputContainer:{flex:1,paddingHorizontal:20,paddingVertical:2},web_confirmInput:{flex:1,backgroundColor:"#14CE95",alignContent:"center",justifyContent:"center",borderRadius:15},web_buttonText:{color:"#fff",textAlign:"center",fontSize:20}}),h=n(168),T=n(294),k=n(193),S=n(142);g.a.apps.length?g.a.app():g.a.initializeApp({apiKey:"AIzaSyA9MV-PgCXfWhnGt-FRHlVIzlvUuRhVmRc",authDomain:"log-my-work-8db34.firebaseapp.com",databaseURL:"https://log-my-work-8db34-default-rtdb.firebaseio.com",projectId:"log-my-work-8db34",storageBucket:"log-my-work-8db34.appspot.com",messagingSenderId:"721021340350",appId:"1:721021340350:web:75b15661f04266d863ecef",measurementId:"G-86K99VSDRW"});var _=Object(T.a)(),j=l.a.createContext({});function D(){var e=Object(o.useState)(null),t=r()(e,2),n=t[0],a=t[1],s=Object(o.useState)(0),c=r()(s,2),u=c[0],m=c[1];return Object(o.useEffect)((function(){g.a.database().ref("users").on("value",(function(e,t){0==u&&m(Object.keys(e.val()).length),a(e.val())}))}),[]),n?(console.log(Object.keys(n).length,u),Object.keys(n).length!=u&&Object(S.a)(),l.a.createElement(j.Provider,{value:n},l.a.createElement(h.a,null,l.a.createElement(_.Navigator,null,"web"!==i.a.OS&&l.a.createElement(_.Screen,{name:"Home",component:y,options:{title:"Registo produ\xe7\xe3o Hoterway",headerStyle:{backgroundColor:"#464646"},headerTintColor:"#FFF"}}),"web"===i.a.OS&&l.a.createElement(_.Screen,{name:"Home",component:E,options:{title:"Registo produ\xe7\xe3o Hoterway",headerTitleStyle:{alignSelf:"center"},headerStyle:{backgroundColor:"#464646"},headerTintColor:"#FFF"}}),l.a.createElement(_.Screen,{name:"Admin",component:v,options:{title:"Admin",headerTitleStyle:{alignSelf:"center"},headerBackTitle:"Logout",headerStyle:{backgroundColor:"#464646"},headerTitleContainerStyle:{left:0},headerTintColor:"#FFF"}}),l.a.createElement(_.Screen,{name:"AdminUserDays",component:I,options:{title:"Dias de Trabalho",headerTitleStyle:{alignSelf:"center"},headerStyle:{backgroundColor:"#464646"},headerTitleContainerStyle:{left:0},headerTintColor:"#FFF"}}),l.a.createElement(_.Screen,{name:"AdminUserDay",component:O,options:{title:"Log do Dia",headerTitleStyle:{alignSelf:"center"},headerStyle:{backgroundColor:"#464646"},headerTitleContainerStyle:{left:0},headerTintColor:"#FFF"}}),l.a.createElement(_.Screen,{name:"AdminAddUser",component:A,options:{title:"Adicionar User",headerTitleStyle:{alignSelf:"center"},headerStyle:{backgroundColor:"#464646"},headerTitleContainerStyle:{left:0},headerTintColor:"#FFF"}}))))):l.a.createElement(b.a,null)}function I(e){var t=e.navigation,n=e.route,a=Object(o.useContext)(j);if(!a)return l.a.createElement(b.a,{style:F.appContainer},l.a.createElement(f.a,null),l.a.createElement(b.a,{style:F.timestampView},l.a.createElement(m.a,{style:F.usernameText},"Loading...")));var r=n.params.username;if(!a[r].logs)return l.a.createElement(b.a,{style:F.appContainer},l.a.createElement(f.a,null),l.a.createElement(b.a,{style:F.timestampView},l.a.createElement(m.a,{style:F.usernameText},"N\xe3o existem logs para o user ",r,"!")));for(var i="0",s=[],c=0,u=Object.keys(a[r].logs);c<u.length;c++){var g=u[c],C=new Date(parseInt(i)),y=new Date(parseInt(g));y.getDate()==C.getDate()&&y.getMonth()==C.getMonth()&&y.getFullYear()==C.getFullYear()||(i=g,s.push(y))}return s.reverse(),l.a.createElement(b.a,{style:F.appContainer},l.a.createElement(f.a,null),l.a.createElement(b.a,{style:F.userView},l.a.createElement(m.a,{style:F.usernameText},r),l.a.createElement(d.a,{style:F.usersContainer},s.map((function(e,n){return l.a.createElement(b.a,{style:F.web_buttonContainerContainer,key:n},l.a.createElement(p.a,{style:[F.web_buttonContainer,{backgroundColor:"#EB5C52",flex:1}],onPress:function(){t.push("AdminUserDay",{username:r,day:e.getTime()})}},l.a.createElement(b.a,null,l.a.createElement(m.a,{style:F.web_usernameText},e.toLocaleDateString()))))})))))}function O(e){var t=e.route,n=Object(o.useContext)(j),a=0;if(!n)return l.a.createElement(b.a,{style:F.appContainer},l.a.createElement(f.a,null),l.a.createElement(b.a,{style:F.timestampView},l.a.createElement(m.a,{style:F.usernameText},"Loading...")));var r=t.params.username,i=new Date(parseInt(t.params.day));return l.a.createElement(b.a,{style:F.appContainer},l.a.createElement(f.a,null),l.a.createElement(b.a,{style:F.userView},l.a.createElement(m.a,{style:F.usernameText},r),l.a.createElement(d.a,{style:F.usersContainer},Object.keys(n[r].logs).filter((function(e){var t=new Date(parseInt(e));return console.log(t.getDate()+" == "+i.getDate()),t.getDate()==i.getDate()&&t.getMonth()==i.getMonth()&&t.getFullYear()==i.getFullYear()})).map((function(e,t,o){var s=Math.abs(parseInt(e)-parseInt(o[t-1])),c=Math.floor(s/36e5),u=Math.floor(s/6e4)%60,d=Math.floor(s/1e3)%60,f=new Date(parseInt(e));if("Saiu"==n[r].logs[e]&&(a+=s),f.getDate()===i.getDate()&&f.getMonth()===i.getMonth()&&f.getFullYear()===i.getFullYear())return l.a.createElement(b.a,{key:t,style:F.timestampViewContainer},l.a.createElement(b.a,{style:F.timestampView},l.a.createElement(b.a,{style:F.logStateContainer},l.a.createElement(m.a,{style:F.usernameText},n[r].logs[e])),l.a.createElement(b.a,{style:F.timestampContainer},l.a.createElement(m.a,{style:F.usernameText},new Date(parseInt(e)).toDateString()),l.a.createElement(m.a,{style:F.usernameText},new Date(parseInt(e)).toLocaleTimeString()))),"Saiu"==n[r].logs[e]&&l.a.createElement(b.a,{style:[F.timestampDiffView,{borderBottomWidth:10,borderBottomColor:"#EB5C52"}]},l.a.createElement(m.a,{style:F.workHoursText},"Tempo de trabalho (hh : mm : ss)"),l.a.createElement(m.a,{style:F.workHoursText},c<10?"0"+c:c," : ",u<10?"0"+u:u," : ",d<10?"0"+d:d)))}))),l.a.createElement(b.a,{style:[F.timestampDiffView,{borderTopWidth:10,borderTopColor:"#EB5C52"}]},l.a.createElement(m.a,{style:F.workHoursText},"Tempo total de trabalho:(hh : mm : ss)"),l.a.createElement(m.a,{style:F.workHoursText},Math.floor(a/36e5)<10?"0"+Math.floor(a/36e5):Math.floor(a/36e5)," : ",Math.floor(a/6e4)%60<10?"0"+Math.floor(a/6e4)%60:Math.floor(a/6e4)%60," : ",Math.floor(a/1e3)%60<10?"0"+Math.floor(a/1e3)%60:Math.floor(a/1e3)%60))))}function v(e){var t=e.navigation,n=Object(o.useContext)(j);return l.a.useLayoutEffect((function(){t.setOptions({headerLeft:function(){return l.a.createElement(k.a,{onPress:function(){g.a.auth().signOut(),t.goBack()}})}})}),[t]),null==n?l.a.createElement(b.a,{style:F.appContainer},l.a.createElement(f.a,null),l.a.createElement(m.a,{style:F.usernameText},"Loading....")):l.a.createElement(b.a,{style:F.appContainer},l.a.createElement(f.a,null),l.a.createElement(b.a,{style:F.userView},l.a.createElement(d.a,{style:F.usersContainer},Object.keys(n).filter((function(e){return!n[e].admin})).map((function(e,n){return l.a.createElement(b.a,{style:F.web_buttonContainerContainer,key:n},l.a.createElement(p.a,{style:[F.web_buttonContainer,{backgroundColor:"#EB5C52",flex:1}],onPress:function(){t.push("AdminUserDays",{username:e})}},l.a.createElement(b.a,null,l.a.createElement(m.a,{style:F.web_usernameText},e))))})),l.a.createElement(b.a,{style:F.web_buttonContainerContainer},l.a.createElement(p.a,{style:[F.web_buttonContainer,{backgroundColor:"#14CE95",flex:1}],onPress:function(){t.push("AdminAddUser")}},l.a.createElement(b.a,null,l.a.createElement(m.a,{style:F.web_usernameText},"Adicionar Utilizador")))))))}function A(){var e=Object(o.useState)(!1),t=r()(e,2),n=t[0],a=(t[1],Object(o.useState)("")),i=r()(a,2),c=i[0],d=i[1],f=Object(o.useState)(""),C=r()(f,2),y=C[0],w=C[1];return l.a.createElement(u.a,{style:{flex:1},behavior:"padding"},l.a.createElement(b.a,{style:F.registerContainer},l.a.createElement(b.a,{style:F.userView},l.a.createElement(m.a,{style:F.usernameText},"Introduza as credenciais:")),l.a.createElement(b.a,{style:{display:"flex"}},l.a.createElement(b.a,{style:[{paddingHorizontal:20,display:"flex",flexDirection:"column"}]},l.a.createElement(m.a,{style:F.usernameText},"Nome"),l.a.createElement(s.a,{style:F.web_passwdInput,onChangeText:function(e){return d(e)}})),l.a.createElement(b.a,{style:[{paddingHorizontal:20,display:"flex",flexDirection:"column",paddingBottom:10}]},l.a.createElement(m.a,{style:F.usernameText},"Password"),l.a.createElement(s.a,{style:F.web_passwdInput,secureTextEntry:!0,onChangeText:function(e){return w(e)}}))),l.a.createElement(b.a,{style:F.userView},l.a.createElement(p.a,{style:[F.web_buttonContainer,{backgroundColor:n?"#14CE95":"#EB5C52"}],onPress:function(){""!==c&&y.length>3&&(g.a.auth().createUserWithEmailAndPassword(c+"@log-my-work.pt",y+"99"),g.a.database().ref("users/"+c).set({admin:!1,uid:null}),setTimeout(Object(S.a)(),50))}},l.a.createElement(b.a,null,l.a.createElement(m.a,{style:F.usernameText},"Adicionar!"))))))}var F=c.a.create({appContainer:{display:"flex",flexGrow:1,backgroundColor:"#313131"},registerContainer:{flexGrow:1,display:"flex",alignContent:"center",backgroundColor:"#313131"},usersContainer:{display:"flex",flexGrow:1,backgroundColor:"#313131"},userView:{padding:10},usernameText:{color:"#fff",textAlign:"center"},buttonContainer:{padding:20,borderRadius:10,justifyContent:"center",alignContent:"center"},timestampView:{padding:10,flex:1,flexDirection:"row",justifyContent:"space-between"},timestampDiffView:{padding:10,display:"flex",flexDirection:"column",justifyContent:"center"},timestampContainer:{},logStateContainer:{},web_appContainer:{backgroundColor:"#000",flexGrow:1,justifyContent:"center",alignContent:"center",maxHeight:800},web_usersContainer:{backgroundColor:"#000"},web_userView:{display:"flex",flex:1,padding:10,justifyContent:"space-between",alignContent:"space-between"},web_usernameText:{color:"#fff",textAlign:"center",fontSize:30},web_buttonContainer:{padding:15,borderRadius:10,justifyContent:"center",alignContent:"center"},web_buttonContainerContainer:{display:"flex",flexDirection:"row",padding:11.5},web_timestampView:{padding:10,flex:1,flexDirection:"row",justifyContent:"space-between"},web_timestampContainer:{},web_logStateContainer:{},web_passwdInput:{borderColor:"white",borderWidth:1,overflow:"hidden",borderRadius:10,color:"#FFF",fontSize:20,marginTop:5},web_passwdInputContainer:{justifyContent:"space-between",alignContent:"space-between",flexDirection:"column",display:"flex"},web_cancelInputContainer:{flex:1,backgroundColor:"red",alignContent:"center",justifyContent:"center",borderRadius:15,paddingHorizontal:40,paddingVertical:6},web_cancelInput:{backgroundColor:"red"},web_confirmInputContainer:{flex:1,backgroundColor:"green",alignContent:"center",justifyContent:"center",borderRadius:15,paddingHorizontal:40,paddingVertical:6},web_confirmInput:{backgroundColor:"green"},web_buttonText:{color:"#fff",textAlign:"center",fontSize:12},workHoursText:{color:"#fff",textAlign:"center"}})},240:function(e,t,n){e.exports=n(290)}},[[240,1,2]]]);
//# sourceMappingURL=app.f4c3e07e.chunk.js.map