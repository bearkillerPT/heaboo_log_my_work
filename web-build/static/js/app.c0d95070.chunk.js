(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{174:function(e,t,n){"use strict";n.d(t,"a",(function(){return k})),n.d(t,"b",(function(){return S}));var a=n(9),r=n.n(a),o=n(0),l=n.n(o),i=n(6),s=n(5),c=n(17),u=n(37),m=n(43),d=n(3),p=n(41),b=n(51),f=n(66);function g(e){var t=e.navigation,n=Object(o.useState)(""),a=r()(n,2),i=a[0],s=a[1],g=Object(o.useContext)(k);return l.a.createElement(d.a,{style:C.appContainer},l.a.createElement(m.a,null),l.a.createElement(u.a,{style:C.usersContainer},Object.keys(g).map((function(e,n){var a=Object(o.useState)(!1),u=r()(a,2),m=u[0],w=u[1],y=Object(o.useState)(!1),E=r()(y,2),x=E[0],_=E[1];Object(o.useEffect)((function(){g[e].logs&&("Entrou"==g[e].logs[Object.keys(g[e].logs)[Object.keys(g[e].logs).length-1]]?_(!0):_(!1))}),[g]);var j=function(){w(!1)};return l.a.createElement(d.a,{style:C.userView,key:n},l.a.createElement(p.a,{style:[C.buttonContainer,{backgroundColor:g[e].admin?"#4D4E4F":x?"green":"red"}],onPress:function(){w(!0)}},l.a.createElement(d.a,null,l.a.createElement(c.a,{style:C.usernameText},e),l.a.createElement(f.a.Container,{visible:m},l.a.createElement(f.a.Title,null,"Inserir password"),l.a.createElement(f.a.Description,null,"Insira a sua password para come\xe7ar!"),l.a.createElement(f.a.Input,{secureTextEntry:!0,onChangeText:function(e){s(e)},keyboardType:"number-pad"}),l.a.createElement(f.a.Button,{label:"OK",onPress:function(){b.a.auth().signInWithEmailAndPassword(e.toLowerCase()+"@log-my-work.pt",i+"99").then((function(){x?(_(!1),b.a.database().ref("users/"+e+"/logs/"+Date.now()).set("Saiu")):g[e].admin?t.push("Admin"):(_(!0),b.a.database().ref("users/"+e+"/logs/"+Date.now()).set("Entrou")),s(""),j()})).catch((function(e){console.log(e)}))}}),l.a.createElement(f.a.Button,{label:"Cancel",onPress:j})))))}))))}var C=s.a.create({appContainer:{display:"flex",flexGrow:1,backgroundColor:"#000"},usersContainer:{display:"flex",flexGrow:1,backgroundColor:"#000"},userView:{padding:10},usernameText:{color:"#fff",textAlign:"center"},buttonContainer:{padding:20,borderRadius:10,justifyContent:"center",alignContent:"center"},timestampView:{padding:10,flex:1,flexDirection:"row",justifyContent:"space-between"},timestampContainer:{},logStateContainer:{}}),w=n(44);function y(e){var t=e.navigation,n=(e.route,Object(o.useContext)(k));return l.a.createElement(d.a,{style:E.web_appContainer},l.a.createElement(m.a,null),l.a.createElement(u.a,{style:E.web_usersContainer},Object.keys(n).map((function(e,a){var i=Object(o.useState)(""),s=r()(i,2),u=s[0],m=s[1],f=Object(o.useState)(!1),g=r()(f,2),C=g[0],y=g[1],x=Object(o.useState)(!1),_=r()(x,2),j=_[0],k=_[1];return Object(o.useEffect)((function(){n[e].logs&&("Entrou"==n[e].logs[Object.keys(n[e].logs)[Object.keys(n[e].logs).length-1]]?k(!0):k(!1))}),[n]),l.a.createElement(d.a,{style:E.web_userView,key:a},C&&l.a.createElement(d.a,{style:E.web_buttonContainerAndInput},l.a.createElement(d.a,{style:E.web_passwdInputContainer},l.a.createElement(w.a,{style:E.web_passwdInput,secureTextEntry:!0,onChangeText:function(e){return m(e)}})),l.a.createElement(d.a,{style:{display:"flex",flex:1}},l.a.createElement(p.a,{style:E.web_cancelInputContainer,onPress:function(){return y(!1)}},l.a.createElement(d.a,{style:E.web_cancelInput},l.a.createElement(c.a,{style:E.web_buttonText,numberOfLines:1},"Cancelar"))),l.a.createElement(p.a,{style:E.web_confirmInputContainer,onPress:function(){b.a.auth().signInWithEmailAndPassword(e.toLowerCase()+"@log-my-work.pt",u+"99").then((function(){n[e].admin&&t.push("Admin"),y(!1)})).catch((function(e){console.log(e)}))}},l.a.createElement(d.a,{style:E.web_confirmInput},l.a.createElement(c.a,{style:E.web_buttonText,numberOfLines:1},"Confirmar"))))),!C&&l.a.createElement(d.a,{style:E.web_buttonContainerContainer},l.a.createElement(p.a,{style:[E.web_buttonContainer,{backgroundColor:n[e].admin?"#4D4E4F":j?"green":"red"}],onPress:function(){y(!C)}},l.a.createElement(d.a,null,l.a.createElement(c.a,{style:E.web_usernameText},e)))))}))))}var E=s.a.create({web_appContainer:{backgroundColor:"#000",flexGrow:1,justifyContent:"center",alignContent:"center"},web_usersContainer:{backgroundColor:"#000",padding:10},web_userView:{display:"flex",flex:1,justifyContent:"space-between",alignContent:"space-between"},web_usernameText:{color:"#fff",textAlign:"center",fontSize:30},web_buttonContainer:{flex:1,padding:20,borderRadius:10,justifyContent:"center",alignContent:"center"},web_buttonContainerContainer:{display:"flex",flexDirection:"row",padding:11.5},web_buttonContainerAndInput:{display:"flex",flexDirection:"row",padding:20,justifyContent:"center",alignContent:"center"},web_timestampView:{padding:10,flex:1,flexDirection:"row",justifyContent:"space-between"},web_timestampContainer:{},web_logStateContainer:{},web_passwdInput:{flex:1,borderColor:"white",overflow:"hidden",borderRadius:10,borderWidth:1,color:"#FFF",fontSize:20},web_passwdInputContainer:{justifyContent:"space-between",alignContent:"space-between",flexDirection:"row",flex:1},web_cancelInputContainer:{flex:1,paddingHorizontal:20,paddingVertical:2},web_cancelInput:{flex:1,backgroundColor:"red",alignContent:"center",justifyContent:"center",borderRadius:15},web_confirmInputContainer:{flex:1,paddingHorizontal:20,paddingVertical:2},web_confirmInput:{flex:1,backgroundColor:"green",alignContent:"center",justifyContent:"center",borderRadius:15},web_buttonText:{color:"#fff",textAlign:"center",fontSize:20}}),x=n(152),_=n(265);b.a.apps.length?b.a.app():b.a.initializeApp({apiKey:"AIzaSyA9MV-PgCXfWhnGt-FRHlVIzlvUuRhVmRc",authDomain:"log-my-work-8db34.firebaseapp.com",databaseURL:"https://log-my-work-8db34-default-rtdb.firebaseio.com",projectId:"log-my-work-8db34",storageBucket:"log-my-work-8db34.appspot.com",messagingSenderId:"721021340350",appId:"1:721021340350:web:75b15661f04266d863ecef",measurementId:"G-86K99VSDRW"});var j=Object(_.a)(),k=l.a.createContext({});function S(){var e=Object(o.useState)(),t=r()(e,2),n=t[0],a=t[1];return Object(o.useEffect)((function(){b.a.database().ref("users").on("value",(function(e){a(e.val()),console.log(e.val())}))}),[]),n?l.a.createElement(k.Provider,{value:n},l.a.createElement(x.a,null,l.a.createElement(j.Navigator,null,"web"!==i.a.OS&&l.a.createElement(j.Screen,{name:"Home",component:g,options:{title:"Registo produ\xe7\xe3o Hoterway",headerStyle:{backgroundColor:"#000"},headerTintColor:"#FFF"}}),"web"===i.a.OS&&l.a.createElement(j.Screen,{name:"Home",component:y,options:{title:"Registo produ\xe7\xe3o Hoterway",headerTitleStyle:{alignSelf:"center"},headerStyle:{backgroundColor:"#000"},headerTintColor:"#FFF"}}),l.a.createElement(j.Screen,{name:"Admin",component:T,options:{title:"Admin",headerTitleStyle:{alignSelf:"center"},headerStyle:{backgroundColor:"#000"},headerTintColor:"#FFF"}}),l.a.createElement(j.Screen,{name:"AdminUser",component:h,options:{title:"Admin",headerTitleStyle:{alignSelf:"center"},headerStyle:{backgroundColor:"#000"},headerTintColor:"#FFF"}})))):l.a.createElement(d.a,null)}function h(e){var t=e.route,n=Object(o.useState)(),a=r()(n,2),i=a[0],s=a[1];if(Object(o.useEffect)((function(){b.a.database().ref("users").once("value").then((function(e){s(e.val())}))}),[]),!i)return l.a.createElement(d.a,{style:I.appContainer},l.a.createElement(m.a,null),l.a.createElement(d.a,{style:I.timestampView},l.a.createElement(c.a,{style:I.usernameText},"Loading...")));var p=t.params.username;return i[p].logs?l.a.createElement(d.a,{style:I.appContainer},l.a.createElement(m.a,null),l.a.createElement(d.a,{style:I.userView},l.a.createElement(c.a,{style:I.usernameText},p),l.a.createElement(u.a,{style:I.usersContainer},Object.keys(i[p].logs).map((function(e,t){return l.a.createElement(d.a,{key:t},l.a.createElement(d.a,{style:I.timestampView},l.a.createElement(d.a,{style:I.logStateContainer},l.a.createElement(c.a,{style:I.usernameText},i[p].logs[e])),l.a.createElement(d.a,{style:I.timestampContainer},l.a.createElement(c.a,{style:I.usernameText},new Date(parseInt(e)).toDateString()),l.a.createElement(c.a,{style:I.usernameText},new Date(parseInt(e)).toLocaleTimeString()))),"Saiu"==i[p].logs[e]&&l.a.createElement(d.a,{style:I.timestampDiffView},l.a.createElement(c.a,{style:I.usernameText},"Tempo de trabalho (minutos): ",new Date(parseInt(e)-parseInt(Object.keys(i[p].logs)[t-1])).toLocaleTimeString())))}))))):l.a.createElement(d.a,{style:I.appContainer},l.a.createElement(m.a,null),l.a.createElement(d.a,{style:I.timestampView},l.a.createElement(c.a,{style:I.usernameText},"N\xe3o existem logs para o user ",p,"!")))}function T(e){var t=e.navigation,n=Object(o.useContext)(k);return null==n?l.a.createElement(d.a,{style:I.appContainer},l.a.createElement(m.a,null),l.a.createElement(c.a,{style:I.usernameText},"Loading....")):l.a.createElement(d.a,{style:I.appContainer},l.a.createElement(m.a,null),l.a.createElement(u.a,{style:I.usersContainer},Object.keys(n).map((function(e,n){return l.a.createElement(d.a,{style:I.timestampView,key:n},l.a.createElement(p.a,{style:[I.buttonContainer],onPress:function(){t.push("AdminUser",{username:e})}},l.a.createElement(c.a,{style:I.usernameText},e)))}))))}var I=s.a.create({appContainer:{display:"flex",flexGrow:1,backgroundColor:"#000"},usersContainer:{display:"flex",flexGrow:1,backgroundColor:"#000"},userView:{padding:10},usernameText:{color:"#fff",textAlign:"center"},buttonContainer:{padding:20,borderRadius:10,justifyContent:"center",alignContent:"center"},timestampView:{padding:10,flex:1,flexDirection:"row",justifyContent:"space-between"},timestampDiffView:{padding:10,flex:1,flexDirection:"row",justifyContent:"center"},timestampContainer:{},logStateContainer:{},web_appContainer:{backgroundColor:"#000",flexGrow:1,justifyContent:"center",alignContent:"center",maxHeight:800},web_usersContainer:{backgroundColor:"#000"},web_userView:{display:"flex",flex:1,padding:10,justifyContent:"space-between",alignContent:"space-between"},web_usernameText:{color:"#fff",textAlign:"center",fontSize:30},web_buttonContainer:{padding:20,borderRadius:10,justifyContent:"center",alignContent:"center"},web_timestampView:{padding:10,flex:1,flexDirection:"row",justifyContent:"space-between"},web_timestampContainer:{},web_logStateContainer:{},web_passwdInput:{flex:1,borderColor:"white",borderWidth:1,color:"#FFF",fontSize:20,marginTop:5},web_passwdInputContainer:{justifyContent:"space-between",alignContent:"space-between",flexDirection:"row",display:"flex"},web_cancelInputContainer:{flex:1,backgroundColor:"red",alignContent:"center",justifyContent:"center",borderRadius:15,paddingHorizontal:40,paddingVertical:6},web_cancelInput:{backgroundColor:"red"},web_confirmInputContainer:{flex:1,backgroundColor:"green",alignContent:"center",justifyContent:"center",borderRadius:15,paddingHorizontal:40,paddingVertical:6},web_confirmInput:{backgroundColor:"green"},web_buttonText:{color:"#fff",textAlign:"center",fontSize:12}})},217:function(e,t,n){e.exports=n(261)}},[[217,1,2]]]);
//# sourceMappingURL=app.c0d95070.chunk.js.map